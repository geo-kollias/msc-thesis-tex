In this chapter we will benchmark all the categories we explored in
the previous chapter against their default Scala counterparts. We choose a few
representative collections for each category in order to see how the different
transformation strategies and the different collections characteristics affect
the speedups.

Section: Benchmarking Configuration

We used the ScalaMeter [cite] microbenchmarking and performance regression
testing framework for the JVM platform. We use the same benchmark template for
all the different categories. The code for the Array benchmarking is at Appendix
X. In short, these benchmarks compare the macroMap's speed against map's speed
on different sizes of the same collection.

In order to make the benchmarking process more stable, reproducible and reliable
we have tweaked the benchmark template with the following parameters:
- each measurement of map/macroMap on a specific collection size is run 25
times successively
- the 25 measurents are divided on 5 separate JVM instances
- every 2 measurements the current collection is reinstantiated
- every 2 measurements a full GC cycle is forced


Section: Benchmarks

Subsection: Arrays, scala.collection.mutable.ArraysOps and
scala.collection.mutable.IndexedSeq Benchmarks

In this category, we chose Array and scala.collection.mutable.ArraySeq as they
are the two most common representatives.

Array

::Benchmark Array.macroMap::
Parameters(size -> 500000): 0.56097312
Parameters(size -> 700000): 0.7099738800000001
Parameters(size -> 900000): 0.9576477599999998
Parameters(size -> 1100000): 1.21228168
Parameters(size -> 1300000): 1.4722931200000002
Parameters(size -> 1500000): 1.7399196000000001

::Benchmark Array.map::
Parameters(size -> 500000): 4.45799216
Parameters(size -> 700000): 6.299174839999998
Parameters(size -> 900000): 8.08378432
Parameters(size -> 1100000): 9.788586
Parameters(size -> 1300000): 11.55207984
Parameters(size -> 1500000): 13.33556824


ArraySeq

::Benchmark ArraySeq.macroMap::
Parameters(size -> 500000): 3.4582486400000003
Parameters(size -> 700000): 4.749739399999998
Parameters(size -> 900000): 6.064567839999999
Parameters(size -> 1100000): 7.423919880000001
Parameters(size -> 1300000): 8.668609240000002
Parameters(size -> 1500000): 9.92232472

::Benchmark ArraySeq.map::
Parameters(size -> 500000): 7.631767120000001
Parameters(size -> 700000): 11.0168042
Parameters(size -> 900000): 13.058838600000001
Parameters(size -> 1100000): 16.710358120000002
Parameters(size -> 1300000): 19.27880912
Parameters(size -> 1500000): 22.4225422


Subsection: scala.collection.LinearSeq Benchmarks

::Benchmark List.macroMap::
Parameters(size -> 500000): 6.2594368
Parameters(size -> 700000): 8.48611428
Parameters(size -> 900000): 10.796582320000002
Parameters(size -> 1100000): 12.769916
Parameters(size -> 1300000): 15.4103694
Parameters(size -> 1500000): 16.79051676

::Benchmark List.map::
Parameters(size -> 500000): 8.491728160000001
Parameters(size -> 700000): 12.166298400000002
Parameters(size -> 900000): 14.759927480000002
Parameters(size -> 1100000): 17.83202016
Parameters(size -> 1300000): 20.578929839999997
Parameters(size -> 1500000): 23.08220884


Subsection: scala.collection.Traversable Transformation

Set

::Benchmark Set.macroMap::
Parameters(size -> 500000): 221.49879935999996
Parameters(size -> 700000): 404.7653434
Parameters(size -> 900000): 517.1970278800001
Parameters(size -> 1100000): 780.3368136800001
Parameters(size -> 1300000): 980.5737080400002
Parameters(size -> 1500000): 1196.13017984

::Benchmark Set.map::
Parameters(size -> 500000): 225.10970228
Parameters(size -> 700000): 428.7541246000001
Parameters(size -> 900000): 552.35796532
Parameters(size -> 1100000): 783.1912343599998
Parameters(size -> 1300000): 1021.149488
Parameters(size -> 1500000): 1256.03854812


Vector
::Benchmark Vector.macroMap::
Parameters(size -> 500000): 4.3560588000000005
Parameters(size -> 700000): 6.97072312
Parameters(size -> 900000): 9.13849436
Parameters(size -> 1100000): 11.800523919999998
Parameters(size -> 1300000): 13.052000560000003
Parameters(size -> 1500000): 15.433811600000002

::Benchmark Vector.map::
Parameters(size -> 500000): 7.798935959999999
Parameters(size -> 700000): 9.82132696
Parameters(size -> 900000): 12.20604608
Parameters(size -> 1100000): 14.643066959999999
Parameters(size -> 1300000): 16.92755692
Parameters(size -> 1500000): 19.05916

